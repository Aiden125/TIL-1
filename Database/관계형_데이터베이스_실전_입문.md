> 해당 글은 [관계형 데이터베이스 실전 입문](https://wikibook.co.kr/rdb-in-practice/)을 정리한 내용입니다.


# 정규화 논리 함수 종속성

## NULL이 포함되면 안된다.
1장에서도 다뤘지만 NULL이 포함돼 있으면 관계형 모델이 무너진다. 따라서 테이블의 모든 행, 모든 카럼은 구체적인 값을 가져야한다.

하지만 테이블에 NULL이 포함되지 않게 하려면 단순하게 NOT NULL 제약을 걸어서 되는 문제가 아니다. **다른 값으로 대체하는 정도로 대체하려면 NOT NULL 제약을 걸지 않는 편이 낫다.**

관계형 모델에서는 의미가 있는 한 묶음의 데이터를 한 단위로 취급해야 한다. 예를 들어 메일 주소를 분해해버리면 그 부분의 문자열에는 의미가 없어지게 된다. 이처럼 값을 조금 더 세세한 단위로 분해하지 않고 전체가 응용 프로그램에서 의미가 있는 것이 아니면 속성의 값이 될 수 없다.


## 후보키와 슈퍼키

### 후보키
후보키는 그 릴레이션에 포함된 튜플의 값을 고유하게 하는 속성의 집합으로 기약(Irreducible)을 말한다. 기약이라는 더는 속성을 줄일 수 없는, 즉 여분의 속성이 없는 상태를 말한다 `후보`키라고 불리는 이유는 이 처럼 튜플의 값을 고유하게 요구하는 속성의 집합이 한 종류밖에 없는 것은 아니기 때문이다.

SQL은 테이블에 기본키가 있지만, 관계형 모델에서는 기본키라는 개념이 없다. 릴레이션에 여러 개의 후보키가 있는 경우 이 키들을 어떤 것도 의미적으로나 기능적으로나 차이가 없고 어떤 후보키를 기콘키로 정할지는 주관적인 문제다. 따라서 정규화를 올바르게 설정한다면 기본키라는 단어는 나오지 않는다.

### 슈퍼키
후보키는 추가 가속성이 없는 속성의 집합이지만, 후보키의 슈퍼셋(후보키의 조합), 즉 추가 속성을 가지는 키를 슈퍼키라고 한다. 슈퍼키도 튜플의 값이 고유하다는 저은 후보키와 같다.

## 함수 족성성 (FD)
2NF ~ BCNF는 함수 종속성에 관한 정의이며 전부 함수 종속성을 이용해 설명할 수 있다. 그리고 릴레이션 내의 함수 종속성을 최대한 배제한 것이 BCNF다. 따라서 2NF, BCNF가 될 때까지 정규화를 수행하자.


> 함수 종속성 정의
>
> 어떤 릴레이션 R이 있고, 제목의 부분집합 두 개를 A, B라고 하자, 릴레이션 R의 모든 튜필이 A 값이 같다면 B의 값도 같은 경유가 있을 수 있다. 이 경우  한해서 B는 A에 함수종속한다고 한다. 이런 관계성을 A -> 라고 기술한다.


**함수 종성성을 제거 이전**

| 고객ID | 주문번호 | 고객기업명 | 고객기업 규모 |
| ---- | ---- | ----- | ------- |
| CA   | 001  | A 상사  | 대규모     |
| CA   | 002  | A 상사  | 대규모     |
| CB   | 003  | B 건설  | 중규묘     |

예를 들어 A -> B 라는 함수 족성을 가지고 있으면 A는 그 릴레이션 키가 아니므로 반복해서 나타난다. (CA, CA 반복). 따라서 A의 값이 같다면 B의 값도 같다는 것이 숨겨진 키(자명하지 않은 함수 종속성)의 성질을 나타낸다. 2NF ~ BCNF에 관한 정규하는 이처럼 자명하지 않은 함수 종석을을 없애는 작업이다.


**함수 종성성을 제거 이후**

| 고객기업ID | 주문번호 |
| ------ | ---- |
| CA     | 001  |
| CA     | 002  |
| CB     | 003  |


| 고객기업ID | 고객기업명 | 고객기업 규모 |
| ------ | ----- | ------- |
| CA     | A 상사  | 대규모     |
| CB     | B 건설  | 중규묘     |


## 결합 종속성은 무손실 분해가 가능하다.
결합 종속성은 프로젝션으로 나눈 릴레이션을 다시 결합하면 원래의 릴레이션으로 돌아가는 성질이다. 이를 무손실 분해라고 한다. 무손실 분해가 가능한것은 결합 종석성이라고 하므로 무손실 분해가 가능 한것은 당연하다.

## 함수 종속성은 결합 종속성의 일종이다.
무손실 분해가 가능한 것을 결합 종속성이라고 하므로 함수 종속성도 당연히 결합 종속성의 일종이다.

## 키가 아닌 속성과 결합 종속성
사실 4NF 이후의 정규화를 하는 경우는 거의 없다. BCNF까지 정규화하면 자동적으로 5NF의 조건을 만족하는 경우가 많기 때문이다

정리하면 다음과 같을때 BCNF는 자동적으로 5NF의 요건을 만족하게 된다.
* 키가 아닌 속성이 존재할 때 (FK 값으로 존재)
* 키에 포함되는 속성이 1개 뿐일 때 (FK 값은 하나)



