> 출저 [AWS 시스템 설계와 마이그레이션](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9791158391201&orderClick=LAG&Kc=)을 보고 정리한 내용입니다.

# 목차
- [목차](#%EB%AA%A9%EC%B0%A8)
- [콘텐츠 캐시 패턴](#%EC%BD%98%ED%85%90%EC%B8%A0-%EC%BA%90%EC%8B%9C-%ED%8C%A8%ED%84%B4)
  - [CloundFront](#cloundfront)
  - [캐시 TTL을 제대로 설정하기](#%EC%BA%90%EC%8B%9C-ttl%EC%9D%84-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0)
  - [Popular Obejct Report를 참고해서 정기적으로 설정 재곰토를 실시](#popular-obejct-report%EB%A5%BC-%EC%B0%B8%EA%B3%A0%ED%95%B4%EC%84%9C-%EC%A0%95%EA%B8%B0%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%84%A4%EC%A0%95-%EC%9E%AC%EA%B3%B0%ED%86%A0%EB%A5%BC-%EC%8B%A4%EC%8B%9C)
  - [오리진 서버의 장애를 고려한 설계](#%EC%98%A4%EB%A6%AC%EC%A7%84-%EC%84%9C%EB%B2%84%EC%9D%98-%EC%9E%A5%EC%95%A0%EB%A5%BC-%EA%B3%A0%EB%A0%A4%ED%95%9C-%EC%84%A4%EA%B3%84)

# 콘텐츠 캐시 패턴
CDN은 정적 콘텐츠를 빠르게 전달하는 시스템입니다. 웹 서비스의 이요자가 많아지면 서버 측의 부하가 높아져서 성능 문제가 발생할 수 있습니다.

이미지를 전달하는 웹서버 앞단에 캐시 서버를 준비해 둡니다. 그리고 사용자의 요청을 우선 캐시 서버에 도착하게 해 두고, 만약 캐시 서버가 컨텐츠를 반활 할 수 있는 오리진 서버 대신 정적 콘텐츠를 보내줍니다 캐시 서버에 콘텐츠를 반환할 수 없는 경우 예전 처럼 오리진 서버로 취득하러 갑니다. 그리고 취즉한 콘텐츠를 캐시 서버에 캐시하게 됩니다. 이런 방식으로 서버의 부하를 감소를기대할 수 있습니다.

캐시 서버를 각지에 분산시킴으로써 최종 사용자로부터 가장 가까운 캐시 서버에서 컨텐츠를 반환할 수 있습니다.

## CloundFront
CloundFront는 이미지나 동영샅 같은 정적 콘텐츠를 캐시해서 오리진 서버 대신 전달하는 CDN 서비스입니다. CloundFront는 전 세계에 엣지 로케이션이 있고 이용자로부터 가장 가까운 엣지 로케이션에서 콘텐츠를 제공합니다. 

클라이언트가 *.CloundFront.net 라는 도메인에 요청을 보내면 CloundFront용 DNS가 가장 가까운 엣지 로케이션의 IP주소를 반환하기 때문에 이용자와 으용 프로그램 개발자는 어떤 엣지 로케이션에 요청을 보내야 하는지를 신경 쓰지 않아도 최적화된 상태로 사용할 수있습니다.


## 캐시 TTL을 제대로 설정하기
정적 콘텐츠의 유형에 따라 캐시 설정을 최적화합니다. 업데이트 빈도가 높거나 오래된 콘텐츠가 표시되면 안되는 경우에 TTL을 짧게 하거나 캐시하지 않은 설정을 사용하고, 그렇지 않은 콘텐츠에 긴 TTL을 설정합니다. 또한 브라우저 캐시 설정과 CloundFront 캐시 설정의 조합에 따라 캐시의 동작이 바뀔 수 있습니다.

## Popular Obejct Report를 참고해서 정기적으로 설정 재곰토를 실시
요청된 콘텐츠마다 캐시 적중률을 리포팅하는 기능이 있습니다. 정기적으로 이 보고서를 확인하고 적중률이 현저히 낮은 것을 캐시할 수 없는지 검토하고 사이트의 성능을 향상시킬 수 있는지 검토 가능합니다.

## 오리진 서버의 장애를 고려한 설계
오리진 서버에 장개가 발생했을 때도 에러 페이지를 표시하도록 설정할 수 있습니다. 모든 EC2 인스턴스에 문제가 발생하더라도 에러 페이지는 S3에서 반환할 수있습니다.