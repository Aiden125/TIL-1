![http://www.hanbit.co.kr/data/books/B5934047828_l.jpg]!

# 용어정리

## Dirty Write
* 어떤 사람도 문제 없이 파일을 여는 것이 가능하고 나중에 수행된 쪽의 갱신이 반영된다는 경우를 `Dirty Write` 라고 합니다.
* 남보다 늦게 손을 내밀어 이기는 가위바위보 같은 것입니다. 데이터베이스에서 이런 식의 제어는 일반적으로 데이터 무결성 관점에서 기피하는 경향이 있습니다.

# 트랜잭션

## ACID

1. Atomicity 원자성
2. Consistency 일관성
3. Isolation 고립성 또는 격리성
4. Durability 지속성

### Atomicity 원자성
Atomicity 원자성 이란 데디터의 변경을 수반하는 일련의 데이터 조작이 전부 성공할지 전부 실패할지를 보증하는 구조입니다. 

### Consistency 일관성
데이터베이스에는 데이터베이스 오브젝트에 대한 각종 정합성 제약을 추가할 수 있습니다. 이는 이련의 데이터 조작 전후에 그 상태를 유지하는 것을 보증하는, 즉 일관성을 유지하기 위한 구조입니다.

예를 들어 시스템에 사용자를 등록할 때 사용자를 임의로 식별하기 위해 일련번호를 사용자에게 발급합니다. 이때 이 번호 이 번호에 유니크 제약을 설정하면 중복된 사용자 번호를 지정할 수 없습니다.

### Isolation 고립성 또는 격리성
일련의 데이터 조작을 복수 사용자가 동시에 실행해도 각각의 처리가 모순 없이 실행되는 것을 보증한다. 입니다. 

1. 현재 빈 깅글룸의 수를 확인한다. (select)
2. 빈 싱글룸 수에서 1을 빼고 결과를 빈 싱글룸 수로 돌려 쓴다. (update)

이것을 사용자 A, B가 동시에 요청할 경우 문제가 발생합니다.

이런 사태가 발생하는 것을 막기 위해 데이터베이스에는 데이터베이스 오브젝트인 테이블에 대해 Lock을 걸어서 후속 처리 블록 하는 방법이 있습니다.

장금 단위에는 테이블 전체, 블록, 행 등이 있는데 MySQL에서는 트랜잭션 처리를 할 때 주로 행 단위 잠금 기능을 이용합니다.

위 예제로 설명하면 `(1) 현재 빈 깅글룸의 수를 확인한다`을 처리할 때는 `select update` 실행하면 select한 행에 잠금이 걸립니다. 이렇게 되면 후속 처리 해당 잠금이 해제될 때 commit or rollback 까지 대기하게 되며 올바른 처리를 계속할 수 있게 됩니다.



#### Isolation Level

1. 


### Durability 지속성