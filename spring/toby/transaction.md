# 트랜잭션 속성

## 트랜잭션 정의
* 트랜잭션의 개본 개념인 더 이상 쪼갤 수 없는 최소 단위의 작업이라는 개념
* 모두 commit 하던지 모두 rollback을 통해 취소해야함


### Transaction Propagation (트랜잭션 전파)

Transaction Propagetion란 트랜잭션의 경계에서 이미 진행 중인 트랜잭션이 있을 때 또는 없을 때 어떻게 동작할것인가를 결정하는 방식을 말한다. 다양한 시나리오가 있고 결국 트랜잭션을 어떻게 묶느냐의 관점, 즉 모두 commit or 모두 rollback 에 대한 동작 방법에 대한 것

### PROPAGATION_REQUIRED
가장 많이 사용되는 트랜잭션 전파 속성이다. 진행 중인 트랜잭션이 없으면 새로 시작하고, 이미 시작된 트랜잭션이 있으면 이에 참여한다. 트랜잭션 전파 속성을 갖는 코드는 다양한 방식으로 결햅해서 하나의 트랜잭션으로 구성하기 쉽다.

### PROPAGATION_REQUIRED_NEW
항상 새로운 트랜잭션을 시작한다. 즉 앞에서 시작된 트랜잭션이 있든 없든 상관없이 이 새로운 트랜잭션을 만들어서 독자적으로 동작하게한다. 독립적인 트랜젹션이 보장되어야 하는 코드에 적용할 수 있다.

### PROPAGATION_NOT_SUPPROTED
이 속성을 사용하면 트랜잭션이 없이 동작하도록 만들 수 있다. 진행 중인 트랜잭션이 있어도 무시된다. 트랜잭션이 없이 동작하게 할 거라면 뭐하로 트랜잭션ㅇ 경계를 설정해두는 것일까? 그냥 트랜잭션 경계설정을 하지 않으면 되는게 아닐까?
트랜잭션을 무시하는 속성을 두는 데는 이유가 있다. 트랜잭션 경계설정은 보통 AOP를 이용해서 한 번에 많은 메소드에 동시에 적용하는 방법을 사용한다. 그런데 그 중에서 특별한 메소드만 트랜잭션 적용에서 제외하려면 어떻게 해야할까? 물론 포인트컷을 잘 만들어서 특정 메소드가 AOP 적용 대상이 되지 않게 하는 방법도 있겠지만 포인트컷이 상당히 복잡해질 수 있다. 그래서 차라리 모든 메소드에 트랜잭션 AOP가 적용되게 하고, 특정 메소드의 트랜잭션 전파 속성만 PROPAGATION_NOT_SUPPROTED로 설정해서 트랜잭션 없이 동작하게 만드는 편이 낫다



* 토비의 스프링 정리
